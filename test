def standardize_angle_brackets(line: str) -> str:
    """
    Generic repair for malformed <...> blocks.
    Rule:
    - If a '<' appears while another '<...>' is still open,
      auto-close the previous block before starting the new one.
    """

    line = norm(line)

    result = []
    open_block = False
    buffer = ""

    i = 0
    while i < len(line):
        ch = line[i]

        if ch == "<":
            # If already inside a block, close it before starting new
            if open_block:
                result.append(buffer.strip() + ">")
                buffer = ""

            open_block = True
            buffer = ""
            i += 1
            continue

        if ch == ">" and open_block:
            result.append(buffer.strip() + ">")
            buffer = ""
            open_block = False
            i += 1
            continue

        if open_block:
            buffer += ch
        else:
            result.append(ch)

        i += 1

    # Close any dangling block at end
    if open_block and buffer.strip():
        result.append(buffer.strip() + ">")

    return "".join(result)
