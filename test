# Dimensionality reduction for reference embeddings
tsne_ref = TSNE(n_components=2, random_state=42, perplexity=30)
ref_2d = tsne_ref.fit_transform(ref_embeddings)

# Dimensionality reduction for current embeddings
tsne_curr = TSNE(n_components=2, random_state=42, perplexity=30)
curr_2d = tsne_curr.fit_transform(curr_embeddings)

# Plot
plt.figure(figsize=(10, 6))
plt.scatter(ref_2d[:, 0], ref_2d[:, 1], c="green", label="Reference Data", alpha=0.6)
plt.scatter(curr_2d[:, 0], curr_2d[:, 1], c=colors, label="Current Data", alpha=0.8)
plt.legend()
plt.title("Isolation Forest Outlier Detection in BERT Embedding Space (t-SNE)")
plt.xlabel("t-SNE Dimension 1")
plt.ylabel("t-SNE Dimension 2")
plt.show()
