def standardize_angle_brackets(line: str) -> str:
    """
    Standardize malformed <...> blocks.

    Rule:
    - If a new '<' appears while a previous '<' is still open,
      automatically close the previous block before starting the new one.
    - Close any dangling '<' at end of line.
    """

    line = norm(line)

    result = []
    open_blocks = 0

    for ch in line:
        if ch == "<":
            if open_blocks > 0:
                # close previous block
                result.append(">")
                open_blocks -= 1
            result.append("<")
            open_blocks += 1
        elif ch == ">" and open_blocks > 0:
            result.append(">")
            open_blocks -= 1
        else:
            result.append(ch)

    # close any remaining open blocks
    while open_blocks > 0:
        result.append(">")
        open_blocks -= 1

    return "".join(result)
