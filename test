import inspect
from pydantic import create_model

def function_to_schema(func):
    sig = inspect.signature(func)
    fields = {}

    for name, param in sig.parameters.items():
        fields[name] = (param.annotation, ...)

    model = create_model(func.__name__ + "Schema", **fields)

    return {
        "name": func.__name__,
        "description": func.__doc__ or "",
        "parameters": model.model_json_schema(),
        "callable": func,
    }
