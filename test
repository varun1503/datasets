First, I convert the user query into an embedding and retrieve the top 100â€“150 relevant rows from the database. The query is also passed through an intent classification step using an LLM to determine the Query Intent.

In parallel, the query is evaluated against a predefined list of themes. The LLM is used to identify the most appropriate theme for the query. Based on this identified theme, I filter the corresponding quadruples from the full set by removing the community label.

The filtered quadruples are then inserted into a graph structure.

Next, I perform intent matching: for each node in the graph, I compute the cosine similarity with the query intent and select the best-matching nodes using a similarity threshold of 0.4.

From these best-matching nodes, I use Depth-First Search (DFS) to explore related nodes and retrieve the most relevant subgraph, which becomes the final set of retrieved nodes.


---

Let me know if you'd like this converted into a diagram, flowchart, or code structure.

