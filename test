token_shap_dict = {}

for i, tokens in enumerate(all_tokens):  # Iterate over each sentence
    for token, shap_value in zip(tokens, all_travel[i]):
        if token in token_shap_dict:
            # Ensure we always store lists and append new values
            if isinstance(token_shap_dict[token], list):
                token_shap_dict[token].append(shap_value)
            else:
                token_shap_dict[token] = [token_shap_dict[token], shap_value]  # Convert existing float to list
        else:
            token_shap_dict[token] = [shap_value]  # Store first value as list

print(token_shap_dict)
