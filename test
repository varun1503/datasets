from statsmodels.stats.proportion import samplesize_proportions

# Example inputs
alpha = 0.05  # Significance level
proportion = 0.5  # Assumed proportion
margin_of_error = 0.05
You can also use statistical libraries like Statsmodels or SciPy for more complex sample size calculations.

Using Statsmodels for Proportions
# Calculate sample size
sample_size = samplesize_proportions(proportion, alpha=alpha, margin=margin_of_error)
print("Sample size using Statsmodels:", math.ceil(sample_size))
 Sample Size for Proportions
If you want to sample a dataset where the distribution of labels or categories matters:

Formula:
ğ‘›
=
ğ‘
2
â‹…
ğ‘
â‹…
(
1
âˆ’
ğ‘
)
ğ‘’
2
n= 
e 
2
 
Z 
2
 â‹…pâ‹…(1âˆ’p)
â€‹
 
Where:

ğ‘›
n: Required sample size
ğ‘
Z: Z-score corresponding to the confidence level (e.g., 1.96 for 95% confidence)
ğ‘
p: Estimated proportion of the population (e.g., 0.5 if unknown for maximum variability)
ğ‘’
e: Margin of error (e.g., 0.05 for Â±5%)
Example:
To determine a sample size with 95% confidence and a 5% margin of error:

python
Copy
Edit
import math

# Inputs
confidence_level = 0.95  # 95% confidence
margin_of_error = 0.05   # Â±5% margin
population_proportion = 0.5  # Maximum variability
z_score = 1.96  # For 95% confidence

# Sample size formula
sample_size = (z_score**2 * population_proportion * (1 - population_proportion)) / (margin_of_error**2)

print("Sample size needed:", math.ceil(sample_size))
2. Adjusted Sample Size for Finite Population
If the population size is finite (e.g., 5400 samples), adjust the sample size:

ğ‘›
ğ‘
ğ‘‘
ğ‘—
=
ğ‘›
1
+
ğ‘›
âˆ’
1
ğ‘
n 
adj
â€‹
 = 
1+ 
N
nâˆ’1
â€‹
 
n
â€‹
 
Where:

ğ‘›
ğ‘
ğ‘‘
ğ‘—
n 
adj
â€‹
 : Adjusted sample size
ğ‘›
n: Initial sample size
ğ‘
N: Population size
Example:
python
Copy
Edit
# Adjusted sample size for finite population
population_size = 5400  # Total dataset size

adjusted_sample_size = sample_size / (1 + (sample_size - 1) / population_size)
print("Adjusted sample size:", math.ceil(adjusted_sample_size))

