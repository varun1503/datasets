import mimetypes

def image_insight_prompt(self, image_path, base64_encoded_image):
    # detect MIME type (e.g. image/png, image/jpeg)
    mime_type, _ = mimetypes.guess_type(image_path)
    mime_type = mime_type or "image/png"  # fallback

    prompt_template = HumanMessagePromptTemplate.from_template(template=[
        {
            "type": "text",
            "text": "You are a model risk validation expert. You will be given an image to analyze."
        },
        {
            "type": "image_url",
            "image_url": {
                "url": f"data:{mime_type};base64,{base64_encoded_image}"
            }
        },
    ])
    return prompt_template
